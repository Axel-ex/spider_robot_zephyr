/ {
    aliases {
        servo0 = &servo0;
    };
};

&pinctrl {
    mcpwm_servo_pins: mcpwm_servo_pins {
        group1 {
            pinmux = <MCPWM0_OUT0A_GPIO15>;
			output-enable;
        };
    };
};

&mcpwm0 {
    status = "okay";

    pinctrl-0 = <&mcpwm_servo_pins>;
    pinctrl-names = "default";

    prescale = <1>; // Set the global clock prescaler (often 1 for maximum resolution)

    // The sub-node for the servo resource
    servo0: pwm0 {
        // This is a complex property that defines the PWM signal itself.
        // It MUST adhere to the standard 5-cell PWM binding:
        // <controller, timer_id, operator_id/sub_channel, period_ns, flags>

        // For a servo, use Timer 0 (0), Operator 0 (0), 20ms period (20M ns), and normal polarity.
        pwms = <&mcpwm0 0 0 20000000 PWM_POLARITY_NORMAL>; 
        label = "SERVO_0";

        compatible = "pwm-servo"; // Use a descriptive compatible string
        
        // Recommended for robust servo operation 
        min-pulse = <500000>;  // 0.5 ms
        max-pulse = <2500000>; // 2.5 ms
    };
};
